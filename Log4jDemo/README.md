# Log4J Demo

Almost every large application includes its own logging or tracing API. In conformance with this rule, the **E.U. SEMPER** project decided to write its own tracing API. This was in early 1996. After countless enhancements, several incarnations and much work that API has evolved to become **log4j**, a popular logging package for Java. The package is distributed under the **Apache Software License**, a fully-fledged open source license certified by the open source initiative.

## Apache Log4J2

Apache Log4j 2 is the successor of Log4j 1 which was released as **GA** version in July 2014. The framework was rewritten from scratch and has been inspired by existing logging solutions, including Log4j 1 and **java.util.logging**. The main differences from Log4j 1 are:  
* Improved reliability. Messages are not lost while reconfiguring the framework like in Log4j 1 or Logback
* Extensibility: Log4j 2 supports a plugin system to let users define and configure custom components
* Simplified configuration syntax
* Support for xml, json, yaml and properties configurations
* Improved filters
* Property lookup support for values defined in the configuration file, system properties, environment variables, the ThreadContext Map, and data present in the event
* Support for multiple APIs: Log4j 2 can be used with applications using the Log4j 2, Log4j 1.2, SLF4J, Commons Logging and java.util.logging (JUL) APIs.
* Custom log levels
* Java 8-style lambda support for "lazy logging"
* Markers
* Support for user-defined Message objects
* "Garbage-free or low garbage" in common configurations
* Improved speed

## Logging Levels
| **Level** | **Description** |
| --------- | --------------- |
| OFF | The highest possible rank and is intended to turn off logging. |
| FATAL | Severe errors that cause premature termination. Expect these to be immediately visible on a status console. |
| ERROR | Other runtime errors or unexpected conditions. Expect these to be immediately visible on a status console. |
| WARN | Use of deprecated APIs, poor use of API, 'almost' errors, other runtime situations that are undesirable or unexpected, but not necessarily "wrong". Expect these to be immediately visible on a status console. |
| INFO | Interesting runtime events (startup/shutdown). Expect these to be immediately visible on a console, so be conservative and keep to a minimum. |
| DEBUG | Detailed information on the flow through the system. Expect these to be written to logs only. Generally speaking, most lines logged by your application should be written as DEBUG. |
| TRACE | Most detailed information. Expect these to be written to logs only. Since version 1.2.12. |

## Log File

A log file contains the log generated by the application. The log file extension is **.log**. The contents and behavior of log file is configured in Log4J **Configuration** file.

## Steps to use Log4J2

1. Add maven dependency for Log4J2 in pom.xml.
    ```xml
    <dependency>
		<groupId>org.apache.logging.log4j</groupId>
		<artifactId>log4j-api</artifactId>
		<version>2.0-rc1</version>
	</dependency>
	<dependency>
		<groupId>org.apache.logging.log4j</groupId>
		<artifactId>log4j-core</artifactId>
		<version>2.0-rc1</version>
	</dependency>
    ```
2. Create a log42.xml file in **src/main/resources** folder. This file also known as **Log4J Configuration file**. This file contains configuration about logging levels, logger files etc.
3. Here's how a typical log4j configuration file looks like :
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <Configuration status="INFO">
	    <Appenders>
		    <Console name="Console" target="SYSTEM_OUT">
			    <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n" />
		    </Console>
		    <File name="LoggerName" fileName="folder/LogFileName.log">
			    <PatternLayout>
				    <Pattern>%d %p %c{1.} [%t] %m%n</Pattern>
			    </PatternLayout>
		    </File>
	    </Appenders>
        <Loggers></Loggers>
            <Logger name="com.example.ClassNameForWhichLogFileWillBeGenerated"
                level="info" additivity="false">
                <AppenderRef ref="Console" />
                <AppenderRef ref="LoggerName" />
            </Logger>
            <Root level="info">
                <AppenderRef ref="Console" />
            </Root>
	    </Loggers>
    </Configuration>
    ```
**Appenders :** An appender is an output destination, such as a *console* or a *file*, where logs are generated.  
**Loggers :** A logger is a logger filter, where log levels can be configured and classes are filtered and many more. 

4. To use logger in a class an object of **Logger** Interface must be created. then we can use logger in our program.  

	```java
	import org.apache.logging.log4j.LogManager;
	import org.apache.logging.log4j.Logger;
	public class MyClass {
		private static final Logger logger = LogManager.getLogger(MyClass.class);
		public static void main(String[] args) {
			logger.info("Hello World");
			logger.debug("Hello World");
			logger.error("Hello World");
		}
	}
	```